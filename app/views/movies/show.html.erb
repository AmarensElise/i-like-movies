<!-- app/views/movies/show.html.erb -->
<div class="container mx-auto px-4 py-8">
  <div class="flex flex-col md:flex-row gap-8 mb-8">
    <div class="w-full md:w-1/3">
      <% if @movie.poster_path %>
        <img src="https://image.tmdb.org/t/p/w500<%= @movie.poster_path %>" alt="<%= @movie.title %>" class="w-full rounded-lg shadow">
      <% else %>
        <div class="bg-gray-200 h-96 flex items-center justify-center rounded-lg">
          <span class="text-gray-500">No poster available</span>
        </div>
      <% end %>
    </div>

    <div class="w-full md:w-2/3">
      <h1 class="text-3xl font-bold mb-2"><%= @movie.title %></h1>
      <p class="text-gray-600 mb-4">Released: <%= @movie.release_date %></p>

      <h2 class="text-2xl font-bold mt-8 mb-4">Cast with Ages During Filming</h2>

      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        <% @cast.each do |cast_member| %>
          <div class="bg-white rounded-lg shadow overflow-hidden">
            <% if cast_member[:profile_path] %>
              <img src="https://image.tmdb.org/t/p/w185<%= cast_member[:profile_path] %>" alt="<%= cast_member[:actor].name %>" class="w-full h-auto">
            <% else %>
              <div class="bg-gray-200 h-40 flex items-center justify-center">
                <span class="text-gray-500">No image</span>
              </div>
            <% end %>

            <div class="p-4">
              <h3 class="font-bold"><%= cast_member[:actor].name %></h3>
              <p class="text-sm text-gray-700">as <%= cast_member[:character] %></p>
              <% if cast_member[:age] %>
                <p class="mt-2 bg-blue-100 text-blue-800 px-2 py-1 rounded text-sm inline-block">
                  Age during filming: <%= cast_member[:age] %>
                </p>
              <% else %>
                <p class="mt-2 bg-gray-100 text-gray-600 px-2 py-1 rounded text-sm inline-block">
                  Age unknown
                </p>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
